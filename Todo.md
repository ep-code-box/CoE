## 📋 CoE 플랫폼 개발 로드맵 (우선순위 기반)

> **🎯 개발 목표**: 사용자 지정 우선순위에 따른 단계적 구현

### 🥇 우선순위 1: LangFlow 연동 및 실행

#### 🔄 LangFlow Backend 연동 완성
> **🎯 개발 목적**: LangFlow와 연동하는 Backend 역할 개발 (모니터링 기능은 후순위)

- [X] **LangFlow 서비스 기본 구현**: `services/langflow/langflow_service.py` 구현 완료
- [X] **LangFlow 도구 통합**: `tools/langflow_tool.py` 구현 완료  
- [X] **REST API 엔드포인트**: `/flows/*` 4개 엔드포인트 구현 완료
- [X] **실제 LangFlow 엔진 연동**: HTTP 클라이언트를 통한 실제 LangFlow 서버 통신 구현
- [ ] **플로우 실행 안정화**: 타임아웃, 에러 처리, 재시도 로직 강화
- [ ] **스트리밍 지원**: 실시간 플로우 실행 결과 스트리밍 구현

#### 🔧 LangFlow Backend 운영 환경 구축
- [X] **LangFlow 서버 자동 실행**: Docker Compose에 LangFlow 서비스 추가
- [X] **환경 변수 통합**: LANGFLOW_URL, LANGFLOW_API_KEY 설정 표준화
- [ ] **플로우 버전 관리**: 플로우 변경 이력 및 롤백 기능

#### 🧪 LangFlow 테스트 및 검증
- [ ] **통합 테스트**: 전체 워크플로우 테스트 스크립트 작성
- [ ] **성능 테스트**: 동시 실행, 대용량 플로우 처리 테스트
- [ ] **에러 시나리오 테스트**: 네트워크 오류, 서버 다운 등 예외 상황 테스트

### 🥈 우선순위 2: RagPipeline 안정화

#### 🚨 핵심 기능 구현 (Critical)
- [X] **Repository 간 연관관계 분석**: 공통 의존성, 코드 패턴 유사성, API 호출 관계 분석 로직 구현
- [X] **LLM 기반 문서 생성**: 개발가이드, 공통코드 리스트, 재활용 함수 리스트 자동 생성 기능 (7가지 문서 타입 지원)
- [X] **다중 언어 AST 분석**: JavaScript, TypeScript, Java 등 추가 언어 지원
- [X] **의존성 분석 강화**: package.json, requirements.txt, pom.xml 파싱 및 취약점 검사

#### 🔧 데이터 모델 및 구조 개선
- [X] **스키마 일관성 확보**: Pydantic과 SQLAlchemy 모델 통합
- [X] **데이터베이스 최적화**: 불필요한 테이블 정리 및 인덱스 최적화
- [X] **메모리 vs DB 전략**: 분석 결과 저장 방식 명확화 및 최적화 (JSON 영구 저장소 구현)

#### 🎯 분석 품질 향상
- [X] **코드 메트릭 계산**: 순환 복잡도, 코드 중복도, 유지보수성 지수 계산
- [X] **정적 분석 도구 통합**: bandit, pylint, radon 등 도구 연동
- [X] **분석 결과 검증**: 분석 정확도 검증 및 품질 보증 시스템

#### 🚀 성능 및 안정성 개선
- [X] **분석 성능 최적화**: 대용량 레포지토리 처리 성능 향상 (스마트 commit 기반 변경 감지)
- [X] **에러 핸들링 강화**: 분석 실패 시 부분 결과 저장 및 복구 기능
- [X] **백그라운드 작업 관리**: 분석 작업 큐 및 진행 상황 추적 시스템

### 🥉 우선순위 3: 대화이력관리 및 멀티턴 응답

#### 💬 채팅 시스템 구현
- [X] **데이터베이스 스키마**: `chat_messages`, `conversation_summaries` 테이블 정의 완료
- [X] **세션 관리 모델**: `user_sessions` 테이블 및 3턴 멀티턴 지원 구조 완료
- [X] **채팅 메시지 저장**: 사용자-AI 간 모든 대화 내용 데이터베이스 저장 구현
- [X] **대화 세션 관리**: 사용자별 독립적인 대화 세션 생성 및 관리

#### 🔄 멀티턴 대화 로직
- [X] **3턴 제한 구현**: 대화 턴 수 추적 및 제한 로직 구현
- [X] **컨텍스트 유지**: 이전 대화 내용을 바탕으로 한 연속적인 응답 생성
- [X] **자동 요약 기능**: 3턴 완료 시 대화 내용 자동 요약 및 저장
- [X] **세션 초기화**: 새로운 대화 시작 시 이전 컨텍스트 정리

#### 🧠 대화 품질 향상
- [X] **대화 히스토리 검색**: 과거 대화 내용 검색 및 참조 기능
- [X] **개인화된 응답**: 사용자별 대화 패턴 학습 및 맞춤형 응답
- [X] **대화 분석**: 대화 품질 메트릭 수집 및 개선점 도출

#### 🔐 사용자 인증 통합 (기본 기능만)
- [X] **기본 사용자 인증**: FastAPI-Users를 활용한 기본 사용자 인증 시스템
- [X] **세션 관리**: Redis 기반 기본 세션 저장
- [X] **기본 접근 제어**: 기본적인 사용자별 대화 기능 접근

---

### 🔧 Phase 4: 통합 및 최적화

#### 🔗 시스템 통합
- [X] **OpenAI 호환 임베딩 API**: `/v1/embeddings` 엔드포인트 구현 (현재 404 Not Found)
- [X] **벡터 문서 추가 기능 개선**: 임베딩 서비스 연동 로직 점검 및 success_count 이슈 해결
- [X] **서비스 간 통신**: CoE-Backend와 CoE-RagPipeline 간 기본 API 호출 연동

#### ⚡ 성능 최적화
- [X] **응답 시간 최적화**: AI 에이전트 응답 시간을 5초 → 3초 이하로 단축
- [X] **도구 임베딩 캐싱**: 도구 설명의 임베딩을 사전 계산하여 캐싱하는 성능 최적화
- [X] **데이터베이스 최적화**: 쿼리 성능 향상 및 인덱스 최적화



---

### 🔮 Phase 5: 고급 기능 및 확장

#### 🚀 AI 기능 고도화
- [X] **SKAX 모델 기반 도구 선택 최적화**: 의미적 유사성 기반 도구 선택 및 코사인 유사도 최적화
- [X] **지능형 청킹 시스템**: 함수/클래스/섹션 단위 의미 기반 문서 분할 및 메타데이터 관리
- [X] **코드 패턴 추출**: 반복되는 코드 패턴, 디자인 패턴, 안티패턴 자동 식별

#### 🔌 IDE 통합 및 확장성
- [ ] **VSCode Extension**: CoE Extension 개발 및 배포
- [ ] **IntelliJ Plugin**: CoE Plugin 개발 및 배포
- [ ] **실시간 코드 분석 API**: `/realtime/analyze` 엔드포인트로 실시간 코드 분석 및 피드백 제공
- [ ] **WebSocket 통신**: `/code/stream` WebSocket 엔드포인트로 실시간 양방향 통신 지원

---

### ✅ 완료 (Done)

#### 🎉 기능점검결과 기준 정상 동작 확인 (2025-08-01)
- [X] **Docker 컨테이너 시스템**: 5개 서비스 모두 정상 실행 중 (ChromaDB, MariaDB, Korean Embeddings, CoE-Backend, CoE-RagPipeline)
- [X] **데이터베이스 연동**: MariaDB 연결 및 CRUD 작업 정상 동작
- [X] **벡터 데이터베이스**: ChromaDB 연결 및 기본 기능 정상 동작
- [X] **API 엔드포인트**: CoE-Backend 21개, CoE-RagPipeline 4개 엔드포인트 모두 정상 응답
- [X] **AI 에이전트**: LangGraph 기반 대화 및 도구 라우팅 정상 동작
- [X] **통합 워크플로우**: Git 분석 → 가이드 생성 파이프라인 정상 동작
- [X] **다중 모델 지원**: 4개 모델(gpt-4o-mini, gpt-4o, ax4, coe-agent-v1) 정상 지원
- [X] **코딩 어시스턴트**: 10개 언어 지원 및 기본 기능 정상 동작

#### 📚 문서 현행화 완료 (2025-08-01)
- [X] **메인 README.md**: 최신 아키텍처, 기능, 설치 가이드 업데이트
- [X] **CoE-Backend/README.md**: 새로운 API 엔드포인트, 도구, 사용법 업데이트
- [X] **CoE-RagPipeline/README.md**: 최신 분석 기능과 API 문서 업데이트
- [X] **API_TROUBLESHOOTING.md**: 최신 이슈들과 해결 방법 추가
- [X] **docs/API_USAGE_GUIDE.md**: 완전한 API 사용 가이드 신규 작성
- [X] **문제 해결 가이드**: 현재 시스템 상태 기반 문제 해결 방법 보완

#### CoE Backend
- [X] **LangGraph 에이전트 아키텍처 구현**: 동적 도구 라우팅 및 자동 등록 기능 구현 완료
- [X] **OpenWebUI 호환 API 구현**: `/v1/chat/completions`, `/v1/models` 엔드포인트 구현 완료
- [X] **RAG 기반 가이드 추출 도구**: `guide_extraction_tool`이 `CoE-RagPipeline`의 검색 API를 사용하도록 개선 완료
- [X] **MariaDB 연동 (LangFlow)**: LangFlow 데이터 저장을 위한 DB 서비스 및 API 구현 완료
- [X] **기본 코딩 어시스턴트 도구**: 코드 생성, 리팩토링, 리뷰, 테스트 생성 도구 구현 완료
- [X] **코딩 어시스턴트 API**: `/api/coding_assistant/*` 엔드포인트 구현 완료
- [X] **벡터 검색 API**: `/vector/search`, `/vector/add`, `/vector/info` 엔드포인트 정상 동작
- [X] **LangFlow 관리 API**: `/flows/*` 4개 엔드포인트 정상 동작

#### CoE RagPipeline
- [X] **Git 레포지토리 분석 파이프라인**: AST, 기술 스택 등 정적 분석 기능 구현 완료
- [X] **Embedding 및 벡터 검색**: 분석 결과를 ChromaDB에 임베딩하고, `/api/v1/search` API를 통해 검색하는 기능 구현 완료
- [X] **DB 모델 정의**: MariaDB에 분석 결과를 저장하기 위한 SQLAlchemy 모델(`RagAnalysisResult`) 정의 완료
- [X] **분석 결과 관리**: `/api/v1/analyze`, `/api/v1/results` API를 통한 분석 작업 관리 완료
- [X] **분석 결과 영속성**: 분석 결과가 서버 재시작 후에도 유지되는 기능 구현 완료

---

### 📋 개발 진행 상황 추적

#### 🎯 우선순위별 진행률
- **🥇 LangFlow 연동**: 95% 완료 (기본 구조 완성, 실제 엔진 연동 완료, 고급 기능만 남음)
- **🥈 RagPipeline 안정화**: 90% 완료 (핵심 기능 모두 구현 완료, 최적화만 남음)
- **🥉 대화이력관리**: 95% 완료 (DB 스키마 및 로직 구현 완료, 고급 기능만 남음)

#### 🚨 즉시 해결 필요한 이슈
- [X] **LangFlow 서버 연동**: 실제 LangFlow 엔진과의 HTTP 통신 구현 ✅ 완료
- [X] **Repository 연관관계 분석**: 핵심 기능 완전 미구현 상태 ✅ 완료
- [X] **채팅 메시지 저장**: 데이터베이스 저장 로직 구현 필요 ✅ 완료

---

### 🔮 Phase 6: 보안 강화 (후순위)

#### 🛡️ 인증 및 권한 관리
- [ ] **JWT 기반 고급 인증**: 토큰 갱신, 다중 세션 관리, 보안 강화
- [ ] **API 키 기반 인증**: 간단하고 안전한 API 키 인증 시스템 구현
- [ ] **권한 기반 접근 제어**: 역할별 세밀한 권한 관리 및 접근 제어
- [ ] **세션 보안 강화**: Redis 기반 세션 보안 및 세션 하이재킹 방지

#### 🔒 데이터 보안
- [ ] **데이터 암호화**: 코드 데이터 전송 시 암호화 적용
- [ ] **서비스 간 인증**: CoE-Backend와 CoE-RagPipeline 간 API 호출 보안 강화
- [ ] **민감 정보 보호**: API 키, 토큰 등 민감 정보 안전한 저장 및 관리

#### 🚨 보안 관리
- [ ] **접근 제어**: IP 기반 접근 제어 및 레이트 리미팅
- [ ] **보안 로깅**: 보안 이벤트 로깅 시스템
- [ ] **취약점 스캔**: 정기적인 보안 취약점 검사 및 패치 관리

---

### 🔮 장기 비전 및 확장 계획

#### 📊 엔터프라이즈 기능
- [ ] **Private Git Repository 지원**: Git 토큰/SSH 키를 관리하고 사용하는 기능 추가
- [ ] **팀 협업 기능**: 팀별 코드 스타일, 리뷰 기준, 지식 공유 기능
- [ ] **사용자 만족도 조사**: 생성된 가이드 품질에 대한 사용자 피드백 수집 시스템

#### 🤖 AI 기능 고도화
- [ ] **멀티모달 지원**: 이미지, 다이어그램 등 비-텍스트 데이터 분석 및 검색 기능
- [ ] **코드 생성 AI 고도화**: 자연어 요구사항으로부터 완전한 애플리케이션 생성
- [ ] **자동 리팩토링**: 대규모 코드베이스의 자동 리팩토링 및 마이그레이션 지원

---

### 🔮 Phase 7: 모니터링 및 성능 추적 (후순위)

#### 📊 시스템 모니터링
- [ ] **플로우 모니터링**: LangFlow 실행 상태 및 성능 모니터링 대시보드
- [ ] **통합 모니터링**: 전체 시스템 상태 및 성능 모니터링 대시보드
- [ ] **메모리 사용량 모니터링**: 컨테이너별 메모리 사용량 모니터링 및 최적화
- [ ] **보안 모니터링**: 보안 이벤트 모니터링 시스템

#### 📈 성능 추적 및 분석
- [ ] **성능 벤치마킹**: API 응답 시간, 메모리 사용량 등 성능 지표 추적
- [ ] **실시간 성능 대시보드**: 시스템 성능 실시간 모니터링 및 알림
- [ ] **성능 최적화 자동화**: 성능 지표 기반 자동 최적화 시스템

